CREATE DATABASE IF NOT EXISTS pmtr;
USE MyDatabase;
CREATE TABLE IF NOT EXISTS User (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    Username VARCHAR(255) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    Email VARCHAR(255) NOT NULL
);
CREATE TABLE IF NOT EXISTS Image (
    ImageID INT AUTO_INCREMENT PRIMARY KEY,
    UserID INT NOT NULL,
    ImageURL VARCHAR(255) NOT NULL,
    UploadTime DATETIME NOT NULL,
    FOREIGN KEY (UserID) REFERENCES User(UserID)
);
CREATE TABLE IF NOT EXISTS RecognitionResult (
    ResultID INT AUTO_INCREMENT PRIMARY KEY,
    ImageID INT NOT NULL,
    RecognitionContentURL VARCHAR(255) NOT NULL,
    RecognitionTime DATETIME NOT NULL,
    FOREIGN KEY (ImageID) REFERENCES Image(ImageID)
);
ALTER TABLE images MODIFY COLUMN image_id bigint AUTO_INCREMENT PRIMARY KEY;
ALTER TABLE recognition_results MODIFY COLUMN result_id bigint AUTO_INCREMENT PRIMARY KEY;
ALTER TABLE users MODIFY COLUMN user_id bigint AUTO_INCREMENT PRIMARY KEY;